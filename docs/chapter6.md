# 메소드 정리

### 메소드 추출

* 메소드가 길거나, 주석을 달아야 코드 해석이 가능할때 사용
    - 직관적인 메소드 이름과 함께 잘게 쪼게 분리한다.
    - 분리에서 중요한건 메서드 명과 메소드 내용이 중요

* 방법
    - 목적에 부합하는 이름의 새 메서드를 생성 (원리가 아니라 기능을 나타내는 이름)
    - 기존 메서드에서 빼낸 코드를 새로 생성한 메서드로 복사
    - 빼낸 코드에서 기존 메서드의 모든 지역변수 참조를 찾아 새 메서드의 지역변수나 매개변수로 수정
    - 빼낸 코드 안에서만 사용하는 임시 변수가 있다면 새로 선언
    - 추출 코드에 의해 변경되는 지역변수가 있는지 파악
    - 빼낸 코드에서 읽어들인 지역변수를 대상 메서드에 배개변수로 전달

### 메소드 내용 직접 삽입

* 메소드 명에 그 로직이 견줄 간단한 기능이라면 메소드를 없앤다.

* 방법
    - 메서드가 재정의되어 있지 않은지 확인
    - 메서드 호출 하는 부분을 모두 찾자
    - 각 호출 부분을 메서드 내용으로 교체
    - 테스트
    - 메서드 정의 삭제
    - 복잡한 상황에선 이 기법을 자제한다.

### 임시변수 내용 직접 삽입

* 간단한 수식을 받는 임시변수로 인해 리팩토링이 힘들 시 그 임시변수를 참조하는 부분을 수식으로 변경 

* 방법
    - 대입문의 우변에 문제가 없는지 확인하고 문제가 없다면 임시변수를 final로 선언하고 컴파일
    - 임시변수를 참조하는 부분을 찾아서 대입문 우변의 수식으로 바꾼다.
    - 컴파일, 테스트
    - 임시변수 선언과 대입문을 삭제
    - 컴파일, 테스트

### 임시변수를 메서드로 변환

* 임시변수를 메소드로 추출, 임시변수 호출부분을 메소드호출로 변환

* 방법
    - 값이 한 번만 대입되는 임시변수를 찾는다.
        - 값이 여러 번 대입되는 임시변수가 있으면 임시변수 분리 기법을 고려
    - 그 임시변수를 final로 선언
    - 컴파일
    - 대입문 우변을 빼내어 메서드로 만든다.
        - 처음엔 메서드를 private으로 선언, 다른 곳에서 호출된다면 접근 제한을 완화
        - 추출 메서드에 문제가 없는지, 상태가 변경되는지 확인. 만약 객체 변경 등의 상태가 변경된다면 상태변경 메서드와 값 반환 메서드를 분리기법 실시
    - 컴파일, 테스트
    - 임시변수를 대상으로 임시변수 내용 직접 삽입 기법을 실시

* 참고
    - 임시변수들 추출 전 final을 이용하여 정말 한번만 사용되는지 확인해보자

### 직관적인 임시변수 사용

* 사용된 수식이 복잡할땐 그 수식을 결과나 용도에 부합하는 직관적인 임시변수에 대입한다.

* 방법
    - 임시변수를 final로 선언하고, 복잡한 수식에서 한 부분의 결과를 임시변수에 대입
    - 수식에서 한 부분의 결과를 임시변수 값으로 교체
    - 컴파일, 테스트
    - 다른 부분을 대상으로 반복

### 임시변수 분리

* 루프변수나 누적용 임시변수가 아닌 임시변수에 여러 번 값이 대입될 땐 각 대입마다 다른 임시변수를 사용